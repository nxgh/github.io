---
title: class 与 style 绑定
index: 6
date: 2023/01/05
---

# class 与 style 绑定

## class 绑定

### Vue

| Vue            | 语法                                          | 传入的值                                      |
| :------------- | :-------------------------------------------- | :-------------------------------------------- |
| 布尔值切换类名 | `:class="{ active: isActive }"`               | `isActive = true `                            |
| 绑定对象       | `:class="classObject"`                        | `classObject = {foo: true, bar: false}`       |
| 绑定数组       | `:class="[class1, class2]"`                   | `class1 = 'foo', class2 = 'bar'`              |
| 数组条件渲染   | `:class="[{ active: isActive }, errorClass]"` | `isActive = true, errorClass = 'text-danger'` |

```vue
<script setup>
const isActive = true,
  hasError = false,
  classObject = { foo: true, bar: false },
  activeClass = 'active',
  errorClass = 'text-danger'
</script>

<template>
  <div :class="{ active: isActive }"></div>
  <div class="static" :class="{ active: isActive, 'text-danger': hasError }"></div>
  <div :class="classObject"></div>
  <div :class="[activeClass, errorClass]"></div>
  <div :class="[{ active: isActive }, errorClass]"></div>
</template>
```

组件上使用：

- 只有一个根元素的组件，class 会被自动应用到根元素上, 并于已有的 class 属性合并
- 多个根元素，需要指定哪个根元素来接收这个 class, 通过 `$attrs.class`

<CH.Code>

```vue app.vue
<MyComponent :class="{ active: isActive }" />
```

---

```vue MyComponent.vue
<p :class="$attrs.class">Hi!</p>
<span>This is a child component</span>
```

</CH.Code>

### React

| React                   | 语法                                           |
| :---------------------- | :--------------------------------------------- |
| 基本                    | `className="active"`                           |
| 布尔值切换类名          | `className={isActive ? 'active' : ''}`         |
| 多重类绑定              | `className={classExpression}`                  |
| 使用 classnames package | `className={classNames('foo', { bar: true })}` |

react 中一般会使用 `classnames` 库来处理 class

```jsx
import classNames from 'classnames'

function App() {
  return (
    <>
      <div className={isActive ? 'active' : ''}></div>
      <div className={classNames({ active: isActive })}></div>
      <div className={classNames('static', { active: isActive, 'text-danger': hasError })}></div>
      <div className={classNames(classObject)}></div>
      <div className={classNames(activeClass, errorClass)}></div>
      <div className={classNames({ active: isActive }, errorClass)}></div>
    </>
  )
}
```

### Angular

| Angular                           | 语法                        |                                                        |
| :-------------------------------- | :-------------------------- | ------------------------------------------------------ |
| 布尔值切换 class                  | `[class.active]="isActive"` | `isActive = true`                                      |
| 用空格分隔的类名字符串            | `[class]="classExpression"` | `classExpression = "my-class-1 my-class-2 my-class-3"` |
| 以类名作为键名,布尔值作为值的对象 | `[class]="classExpression"` | `classExpression = {foo: true, bar: false}`            |
| 类名的数组                        | `[class]="classExpression"` | `classExpression = ['foo', 'bar']`                     |

```html
<div [class.active]="isActive"></div>
<div class="static" [class]="{ active: isActive, 'text-danger': hasError }"></div>
<div [class]="classObject"></div>
<div [class]="[activeClass, errorClass]"></div>
<div [class]="errorClass" [class.active]="isActive"></div>
```

#### ngClass

`ngClass` 可以从 HTML 元素上添加和移除 CSS 类。

<CH.Code>

```html demo.component.html
<div class="a-class" [ngClass]="'foo bar'">xxx</div>
<div class="a-class" [ngClass]="['foo','bar']">xxx</div>
<div class="a-class" [ngClass]="{'active': isActive,'text-danger': hasError}">xxx</div>
<div class="a-class" [ngClass]="{'foo bar':condtion}">xxx</div>
```

```ts demo.component.ts
import { Component } from '@angular/core'
import { CommonModule } from '@angular/common'

@Component({
  standalone: true,
  selector: 'app-demo',
  templateUrl: './demo.component.html',
  imports: [CommonModule],
})
export class HelloComponent {
  isActive = true
  hasError = false
  condtionCD = true
}
```

</CH.Code>

## 绑定 style

### Vue

| 绑定类型 | 语法                       | 输入值                                           |
| -------- | -------------------------- | ------------------------------------------------ |
| 单一绑定 | `:style="{width: width}"`  | `"100px"`                                        |
| 绑定对象 | `:style="styleExpression"` | `{width: '100px', height: '100px'}`              |
| 绑定数组 | `:style="[width, height]"` | `width = 'width:100px' height = 'height: 100px'` |

```vue
<script setup>
const width = '100px'
const height = 'height: 100px'
const fontSize = 20
const styleObject = { width: '100px', height: '100px' }
</script>
<template>
  <div :style="{ width: width, 'font-size': fontSize + 'px' }"></div>
  <div :style="styleObject"></div>
  <div :style="[width, height]"></div>
</template>
```

### React

| 绑定类型 | 语法                       | 输入值                              |
| -------- | -------------------------- | ----------------------------------- |
| 单一绑定 | `style={{ width: width }}` | `"100px"`                           |
| 绑定对象 | `style={styleExpression}`  | `{width: '100px', height: '100px'}` |

```jsx
function App() {
  return (
    <>
      <div style={{ width }}></div>
      <div style={styleExpression}></div>
    </>
  )
}
```

### Angular

| 绑定类型             | 语法                        | 范例输入值                          |
| :------------------- | :-------------------------- | :---------------------------------- |
| 单一样式绑定         | `[style.width]="width"`     | `"100px"`                           |
| 带单位的单一样式绑定 | `[style.width.px]="width"`  | `100`                               |
| 多重样式绑定         | `[style]="styleExpression"` | `"width: 100px; height: 100px"`     |
| 多重样式绑定         | `[style]="styleExpression"` | `{width: '100px', height: '100px'}` |

```html
<div [style.width]="width"></div>
<div [style.width.px]="width"></div>
<div [style]="styleExpression"></div>
```

#### NgStyle

同样，Angular 也提供了 `NgStyle` 指令, 用于更新容器元素的样式

<CH.Code>

```html demo.component.html
<div [ngStyle]="{ width: '100px' }">xxx</div>
<div [ngStyle]="{ width: ok ? '100px' : '0' }">xxx</div>
<div [ngStyle]="styleObject">xxx</div>
<div [ngStyle]="{ 'font-size.px' : fontSize } ">xxx</div>
```

```ts demo.component.ts
import { Component } from '@angular/core'
import { CommonModule } from '@angular/common'

@Component({
  standalone: true,
  selector: 'app-demo',
  templateUrl: './demo.component.html',
  imports: [CommonModule],
})
export class HelloComponent {
  ok = true
  width = '100px'
  fontSize = 20
  styleObject = { width: '100px', height: '100px' }
}
```

</CH.Code>

## 样式封装

TODO:

- css module
- style scoped
- angular encapsulation 